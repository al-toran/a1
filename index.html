<script>
    // 1. 오디오 객체를 전역(Global)에 미리 선언 (장비 초기화 단계)
    const audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');

    // 2. 함수는 딱 하나만 정의합니다 (정책 단일화)
    function playMusic() {
        const songInput = document.getElementById('userInput');
        const song = songInput.value;
        const status = document.getElementById('status');

        if(song) {
            // [중요] 사파리 통과 핵심: 클릭 이벤트 안에서 '직접' 실행
            // alert() 같은 팝업창은 브라우저가 흐름을 끊으므로 과감히 삭제했습니다.
            audio.play()
                .then(() => {
                    status.innerText = "♬ 재생 중: " + song;
                    status.style.color = "#1db954";
                })
                .catch(error => {
                    // 사파리 보안 정책으로 막혔을 경우 로그 확인
                    console.log("재생 오류:", error);
                    status.innerText = "재생 버튼을 다시 한번 눌러주세요.";
                });
        } else {
            status.innerText = "노래 제목을 먼저 입력하세요!";
            status.style.color = "red";
            songInput.focus();
        }
    }
</script>